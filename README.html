<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-01-29 Wed 15:26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="author" content="Norwid Behrnd" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/search.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/search.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org4fd55f2">1. context/motivation</a></li>
<li><a href="#org496c678">2. use case</a></li>
<li><a href="#org42a6870">3. test case</a></li>
<li><a href="#orgd6087fa">4. content of the project</a></li>
</ul>
</div>
</div>
<a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
<div id="outline-container-org4fd55f2" class="outline-2">
<h2 id="org4fd55f2"><span class="section-number-2">1.</span> context/motivation</h2>
<div class="outline-text-2" id="text-1">
<p>
By the post <a href="https://openmolecules.org/forum/index.php?t=msg&amp;th=586&amp;goto=1587&amp;#msg_1587">Assign cluster name based on cluster size</a> (April 7,
2022), user mcmc observes <a href="https://openmolecules.org/datawarrior/index.html">DataWarrior</a> labels the clusters in
sequence of their creation.  mcmc suggests it were beneficial if the
cluster labels would reflect their popularity e.g., the greater the
number of molecules in a cluster, the lower the assigned label.
</p>
</div>
</div>
<div id="outline-container-org496c678" class="outline-2">
<h2 id="org496c678"><span class="section-number-2">2.</span> use case</h2>
<div class="outline-text-2" id="text-2">
<p>
The script runs from the command line and requires an installation
of Python 3.  All functionality is provided by the standard library,
there are no additional dependencies:
</p>

<div class="org-src-container">
<pre class="src src-shell">  datawarrior_clustersort.py [-h] [-r] file
</pre>
</div>

<p>
DataWarrior's result of clustering (<code>Chemistry -&gt; cluster
  compounds/reactions</code>) may be exported as text file (<code>File -&gt; Save
  Special</code>) is read as input (<code>file</code>).  The script identifies the
column with DataWarrior's cluster labels by search for the column
header <code>Cluster No</code> assigned by default.  A new record file is
written where the entries are sort to report the most populous
cluster and its entries first, followed by the less populous
clusters.  To reflect this sequence now based on counting entries
per cluster, the cluster's labels are newly assigned.
</p>

<p>
It is possible to reverse the sort by either optional <code>--reverse</code>,
or <code>-r</code>.  Then, the script reports first the cluster with the least
number of entries.
</p>
</div>
</div>
<div id="outline-container-org42a6870" class="outline-2">
<h2 id="org42a6870"><span class="section-number-2">3.</span> test case</h2>
<div class="outline-text-2" id="text-3">
<p>
A library of 100 random drug-like molecules was generated by
DataWarrior and clustered at low threshold of similarity (<code>Structure
  FragFp 0.4</code>, file <code>100Random_Molecules.dwar</code>).  The export (file
<code>100Random_Molecules.txt</code>) was processed by
</p>

<div class="org-src-container">
<pre class="src src-bash">python3 datawarrior_clustersort.py 100Random_Molecules.txt
</pre>
</div>

<p>
to yield <code>100Random_Molecules_sort.txt</code> as newly assigned set.  As
preview, the script briefly describes the distribution prior and
after the sort to the CLI:
</p>
<div class="org-src-container">
<pre class="src src-nil">DataWarrior's assignment of clusters:
cluster:        1 molecules:       11
cluster:        2 molecules:       28
cluster:        3 molecules:       29
cluster:        4 molecules:       14
cluster:        5 molecules:        8
cluster:        6 molecules:        2
cluster:        7 molecules:        3
cluster:        8 molecules:        2
cluster:        9 molecules:        1
cluster:       10 molecules:        1
cluster:       11 molecules:        1

clusters newly sorted and labeled:
cluster:        1 molecules:       29
cluster:        2 molecules:       28
cluster:        3 molecules:       14
cluster:        4 molecules:       11
cluster:        5 molecules:        8
cluster:        6 molecules:        3
cluster:        7 molecules:        2
cluster:        8 molecules:        2
cluster:        9 molecules:        1
cluster:       10 molecules:        1
cluster:       11 molecules:        1
</pre>
</div>


<p>
A running instance of DataWarrior was able to read the newly written
file <code>100Random_Molecules_sort.txt</code> both by <code>File -&gt; Open</code>, as well
as by the short cut <code>Ctrl + O</code>.
</p>
</div>
</div>
<div id="outline-container-orgd6087fa" class="outline-2">
<h2 id="orgd6087fa"><span class="section-number-2">4.</span> content of the project</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-shell">tree -a -L2 -I .git
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">  <span style="color: #e5786d;">.</span>
  &#9500;&#9472;&#9472; datawarrior_clustersort.py
  &#9500;&#9472;&#9472; .gitignore
  &#9500;&#9472;&#9472; LICENSE
  &#9500;&#9472;&#9472; .pre-commit-config.yaml
  &#9500;&#9472;&#9472; README.html
  &#9500;&#9472;&#9472; README.md
  &#9500;&#9472;&#9472; README.org
  &#9500;&#9472;&#9472; requirements-dev.txt
  &#9492;&#9472;&#9472; test_data
      &#9500;&#9472;&#9472; 100Random_Molecules.dwar
      &#9500;&#9472;&#9472; 100Random_Molecules_sort.txt
      &#9492;&#9472;&#9472; 100Random_Molecules.txt

  2 directories, 11 files
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Norwid Behrnd</p>
<p class="date">Created: 2025-01-29 Wed 15:26</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
